{"ast":null,"code":"// Thin wrappers around your existing logic.\n// These mirror the functions that were previously in your single-page App.\n\nfunction isLikelyLatLngPair(text) {\n  return /^\\s*.+\\s*,\\s*.+\\s*$/.test(text);\n}\nfunction isLikelyUKPostcode(text) {\n  return /\\b[A-Z]{1,2}\\d[A-Z\\d]?\\s*\\d[A-Z]{2}\\b/i.test((text || \"\").trim());\n}\nfunction validateRange(value, kind) {\n  if (kind === \"lat\" && (value < -90 || value > 90)) throw new Error(\"Latitude must be between -90 and 90.\");\n  if (kind === \"lng\" && (value < -180 || value > 180)) throw new Error(\"Longitude must be between -180 and 180.\");\n}\n\n// Parse either decimal or tokenised DMS (e.g. \"51 53 58 N\" or \"-2.0783\" or \"2 04 42 W\")\nfunction parseCoordinateToken(token, kind) {\n  const raw = (token || \"\").trim();\n  if (!raw) throw new Error(\"Missing coordinate.\");\n\n  // Decimal first\n  const normalized = raw.includes(\",\") && !raw.includes(\".\") ? raw.replace(\",\", \".\") : raw;\n  const n = Number(normalized);\n  if (Number.isFinite(n)) {\n    validateRange(n, kind);\n    return n;\n  }\n\n  // Tokenised DMS: deg [min] [sec] [N/S/E/W]\n  const upper = raw.toUpperCase();\n  const hemiMatch = upper.match(/\\b([NSEW])\\b/) || upper.match(/([NSEW])\\s*$/);\n  const hemi = hemiMatch ? hemiMatch[1] : null;\n  const cleaned = upper.replace(/[NSEW]/g, \" \").replace(/[^\\d.\\- ]+/g, \" \").replace(/\\s+/g, \" \").trim();\n  const parts = cleaned.split(\" \").filter(Boolean);\n  if (parts.length < 1 || parts.length > 3) {\n    throw new Error(\"Use decimal (51.8994) or tokens (51 53 58 N).\");\n  }\n  const deg = Number(parts[0]);\n  const min = parts.length >= 2 ? Number(parts[1]) : 0;\n  const sec = parts.length === 3 ? Number(parts[2]) : 0;\n  if (![deg, min, sec].every(Number.isFinite)) throw new Error(\"Invalid coordinate numbers.\");\n  if (min < 0 || min >= 60 || sec < 0 || sec >= 60) throw new Error(\"Minutes/seconds must be 0–59.\");\n  let sign = deg < 0 ? -1 : 1;\n  if (hemi) sign = hemi === \"S\" || hemi === \"W\" ? -1 : 1;\n  const value = sign * (Math.abs(deg) + min / 60 + sec / 3600);\n  validateRange(value, kind);\n  return value;\n}\nasync function fetchJsonOrThrow(url) {\n  const res = await fetch(url, {\n    headers: {\n      Accept: \"application/json\"\n    }\n  });\n  if (!res.ok) {\n    const body = await res.text().catch(() => \"\");\n    let msg = `Request failed (HTTP ${res.status} ${res.statusText}).`;\n    if (res.status === 400) msg += \" Your input may be malformed.\";\n    if (res.status === 429) msg += \" Rate limit hit — wait 10–30 seconds and try again.\";\n    if (res.status === 503) msg += \" Service busy / too many results — try a different month or location.\";\n    if (body) msg += ` Details: ${body.slice(0, 160)}`;\n    throw new Error(msg);\n  }\n  return res.json();\n}\nexport async function geocodeLocation(query) {\n  const q = (query || \"\").trim();\n  if (!q) throw new Error(\"Enter a location (postcode, place name, or lat,lng).\");\n\n  // 1) Lat/Lng pair: \"a,b\"\n  if (isLikelyLatLngPair(q)) {\n    const [a, b] = q.split(\",\").map(s => s.trim());\n    const lat = parseCoordinateToken(a, \"lat\");\n    const lng = parseCoordinateToken(b, \"lng\");\n    return {\n      lat,\n      lng,\n      source: \"manual\"\n    };\n  }\n\n  // 2) Postcode -> Postcodes.io\n  if (isLikelyUKPostcode(q)) {\n    const encoded = encodeURIComponent(q);\n    const url = `https://api.postcodes.io/postcodes/${encoded}`;\n    const json = await fetchJsonOrThrow(url);\n    if (!json || json.status !== 200 || !json.result) {\n      throw new Error(\"Postcode not found. Try a full UK postcode like GL50 1AA.\");\n    }\n    return {\n      lat: json.result.latitude,\n      lng: json.result.longitude,\n      source: \"postcode\"\n    };\n  }\n\n  // 3) Place name -> Nominatim\n  const encoded = encodeURIComponent(q);\n  const url = `https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encoded}`;\n  const results = await fetchJsonOrThrow(url);\n  if (!Array.isArray(results) || results.length === 0) {\n    throw new Error(\"No matching place found. Try adding a town/city, or use a postcode.\");\n  }\n  const first = results[0];\n  const lat = Number(first.lat);\n  const lng = Number(first.lon);\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) throw new Error(\"Geocoder returned an invalid coordinate.\");\n  return {\n    lat,\n    lng,\n    source: \"place\"\n  };\n}\nexport async function geocodePostcode(postcode) {\n  const encoded = encodeURIComponent(postcode);\n  const url = `https://api.postcodes.io/postcodes/${encoded}`;\n  const json = await fetchJsonOrThrow(url);\n  if (!json || json.status !== 200 || !json.result) throw new Error(\"Postcode not found.\");\n  return {\n    lat: json.result.latitude,\n    lng: json.result.longitude,\n    source: \"postcode\"\n  };\n}\nexport async function geocodePlaceName(placeName) {\n  const encoded = encodeURIComponent(placeName);\n  const url = `https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encoded}`;\n  const results = await fetchJsonOrThrow(url);\n  if (!Array.isArray(results) || results.length === 0) throw new Error(\"No matching place found.\");\n  const first = results[0];\n  const lat = Number(first.lat);\n  const lng = Number(first.lon);\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) throw new Error(\"Geocoder returned an invalid coordinate.\");\n  return {\n    lat,\n    lng,\n    source: \"place\"\n  };\n}\nexport async function fetchCrimesForLocation(lat, lng, dateYYYYMM = \"\") {\n  const url = new URL(\"https://data.police.uk/api/crimes-street/all-crime\");\n  url.searchParams.set(\"lat\", String(lat));\n  url.searchParams.set(\"lng\", String(lng));\n  if (dateYYYYMM) url.searchParams.set(\"date\", dateYYYYMM);\n  const res = await fetch(url.toString(), {\n    headers: {\n      Accept: \"application/json\"\n    }\n  });\n\n  // Police API quirk: 404 can mean \"no data for that area/month\"\n  if (res.status === 404) return [];\n  if (!res.ok) {\n    const body = await res.text().catch(() => \"\");\n    let msg = `Police API request failed (HTTP ${res.status} ${res.statusText}).`;\n    if (res.status === 400) msg += \" Your input may be malformed.\";\n    if (res.status === 429) msg += \" Rate limit hit — wait 10–30 seconds and try again.\";\n    if (res.status === 503) msg += \" Service busy — try a different month or location.\";\n    if (body) msg += ` Details: ${body.slice(0, 160)}`;\n    throw new Error(msg);\n  }\n  const json = await res.json().catch(() => []);\n  return Array.isArray(json) ? json : [];\n}\nexport function classifyQueryType(input) {\n  const q = String(input || \"\").trim();\n  if (!q) return {\n    kind: \"empty\"\n  };\n  if (isLikelyLatLngPair(q)) return {\n    kind: \"latlng\"\n  };\n  if (isLikelyUKPostcode(q)) return {\n    kind: \"postcode\"\n  };\n  return {\n    kind: \"place\"\n  };\n}","map":{"version":3,"names":["isLikelyLatLngPair","text","test","isLikelyUKPostcode","trim","validateRange","value","kind","Error","parseCoordinateToken","token","raw","normalized","includes","replace","n","Number","isFinite","upper","toUpperCase","hemiMatch","match","hemi","cleaned","parts","split","filter","Boolean","length","deg","min","sec","every","sign","Math","abs","fetchJsonOrThrow","url","res","fetch","headers","Accept","ok","body","catch","msg","status","statusText","slice","json","geocodeLocation","query","q","a","b","map","s","lat","lng","source","encoded","encodeURIComponent","result","latitude","longitude","results","Array","isArray","first","lon","geocodePostcode","postcode","geocodePlaceName","placeName","fetchCrimesForLocation","dateYYYYMM","URL","searchParams","set","String","toString","classifyQueryType","input"],"sources":["C:/projects/crime-safety-dashboard/src/services/existing.js"],"sourcesContent":["// Thin wrappers around your existing logic.\r\n// These mirror the functions that were previously in your single-page App.\r\n\r\nfunction isLikelyLatLngPair(text) {\r\n  return /^\\s*.+\\s*,\\s*.+\\s*$/.test(text);\r\n}\r\n\r\nfunction isLikelyUKPostcode(text) {\r\n  return /\\b[A-Z]{1,2}\\d[A-Z\\d]?\\s*\\d[A-Z]{2}\\b/i.test((text || \"\").trim());\r\n}\r\n\r\nfunction validateRange(value, kind) {\r\n  if (kind === \"lat\" && (value < -90 || value > 90)) throw new Error(\"Latitude must be between -90 and 90.\");\r\n  if (kind === \"lng\" && (value < -180 || value > 180)) throw new Error(\"Longitude must be between -180 and 180.\");\r\n}\r\n\r\n// Parse either decimal or tokenised DMS (e.g. \"51 53 58 N\" or \"-2.0783\" or \"2 04 42 W\")\r\nfunction parseCoordinateToken(token, kind) {\r\n  const raw = (token || \"\").trim();\r\n  if (!raw) throw new Error(\"Missing coordinate.\");\r\n\r\n  // Decimal first\r\n  const normalized = raw.includes(\",\") && !raw.includes(\".\") ? raw.replace(\",\", \".\") : raw;\r\n  const n = Number(normalized);\r\n  if (Number.isFinite(n)) {\r\n    validateRange(n, kind);\r\n    return n;\r\n  }\r\n\r\n  // Tokenised DMS: deg [min] [sec] [N/S/E/W]\r\n  const upper = raw.toUpperCase();\r\n  const hemiMatch = upper.match(/\\b([NSEW])\\b/) || upper.match(/([NSEW])\\s*$/);\r\n  const hemi = hemiMatch ? hemiMatch[1] : null;\r\n\r\n  const cleaned = upper\r\n    .replace(/[NSEW]/g, \" \")\r\n    .replace(/[^\\d.\\- ]+/g, \" \")\r\n    .replace(/\\s+/g, \" \")\r\n    .trim();\r\n\r\n  const parts = cleaned.split(\" \").filter(Boolean);\r\n  if (parts.length < 1 || parts.length > 3) {\r\n    throw new Error(\"Use decimal (51.8994) or tokens (51 53 58 N).\");\r\n  }\r\n\r\n  const deg = Number(parts[0]);\r\n  const min = parts.length >= 2 ? Number(parts[1]) : 0;\r\n  const sec = parts.length === 3 ? Number(parts[2]) : 0;\r\n\r\n  if (![deg, min, sec].every(Number.isFinite)) throw new Error(\"Invalid coordinate numbers.\");\r\n  if (min < 0 || min >= 60 || sec < 0 || sec >= 60) throw new Error(\"Minutes/seconds must be 0–59.\");\r\n\r\n  let sign = deg < 0 ? -1 : 1;\r\n  if (hemi) sign = hemi === \"S\" || hemi === \"W\" ? -1 : 1;\r\n\r\n  const value = sign * (Math.abs(deg) + min / 60 + sec / 3600);\r\n  validateRange(value, kind);\r\n  return value;\r\n}\r\n\r\nasync function fetchJsonOrThrow(url) {\r\n  const res = await fetch(url, { headers: { Accept: \"application/json\" } });\r\n  if (!res.ok) {\r\n    const body = await res.text().catch(() => \"\");\r\n    let msg = `Request failed (HTTP ${res.status} ${res.statusText}).`;\r\n    if (res.status === 400) msg += \" Your input may be malformed.\";\r\n    if (res.status === 429) msg += \" Rate limit hit — wait 10–30 seconds and try again.\";\r\n    if (res.status === 503) msg += \" Service busy / too many results — try a different month or location.\";\r\n    if (body) msg += ` Details: ${body.slice(0, 160)}`;\r\n    throw new Error(msg);\r\n  }\r\n  return res.json();\r\n}\r\n\r\nexport async function geocodeLocation(query) {\r\n  const q = (query || \"\").trim();\r\n  if (!q) throw new Error(\"Enter a location (postcode, place name, or lat,lng).\");\r\n\r\n  // 1) Lat/Lng pair: \"a,b\"\r\n  if (isLikelyLatLngPair(q)) {\r\n    const [a, b] = q.split(\",\").map((s) => s.trim());\r\n    const lat = parseCoordinateToken(a, \"lat\");\r\n    const lng = parseCoordinateToken(b, \"lng\");\r\n    return { lat, lng, source: \"manual\" };\r\n  }\r\n\r\n  // 2) Postcode -> Postcodes.io\r\n  if (isLikelyUKPostcode(q)) {\r\n    const encoded = encodeURIComponent(q);\r\n    const url = `https://api.postcodes.io/postcodes/${encoded}`;\r\n    const json = await fetchJsonOrThrow(url);\r\n    if (!json || json.status !== 200 || !json.result) {\r\n      throw new Error(\"Postcode not found. Try a full UK postcode like GL50 1AA.\");\r\n    }\r\n    return { lat: json.result.latitude, lng: json.result.longitude, source: \"postcode\" };\r\n  }\r\n\r\n  // 3) Place name -> Nominatim\r\n  const encoded = encodeURIComponent(q);\r\n  const url = `https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encoded}`;\r\n  const results = await fetchJsonOrThrow(url);\r\n\r\n  if (!Array.isArray(results) || results.length === 0) {\r\n    throw new Error(\"No matching place found. Try adding a town/city, or use a postcode.\");\r\n  }\r\n  const first = results[0];\r\n  const lat = Number(first.lat);\r\n  const lng = Number(first.lon);\r\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) throw new Error(\"Geocoder returned an invalid coordinate.\");\r\n  return { lat, lng, source: \"place\" };\r\n}\r\n\r\nexport async function geocodePostcode(postcode) {\r\n  const encoded = encodeURIComponent(postcode);\r\n  const url = `https://api.postcodes.io/postcodes/${encoded}`;\r\n  const json = await fetchJsonOrThrow(url);\r\n  if (!json || json.status !== 200 || !json.result) throw new Error(\"Postcode not found.\");\r\n  return { lat: json.result.latitude, lng: json.result.longitude, source: \"postcode\" };\r\n}\r\n\r\nexport async function geocodePlaceName(placeName) {\r\n  const encoded = encodeURIComponent(placeName);\r\n  const url = `https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encoded}`;\r\n  const results = await fetchJsonOrThrow(url);\r\n  if (!Array.isArray(results) || results.length === 0) throw new Error(\"No matching place found.\");\r\n  const first = results[0];\r\n  const lat = Number(first.lat);\r\n  const lng = Number(first.lon);\r\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) throw new Error(\"Geocoder returned an invalid coordinate.\");\r\n  return { lat, lng, source: \"place\" };\r\n}\r\n\r\nexport async function fetchCrimesForLocation(lat, lng, dateYYYYMM = \"\") {\r\n  const url = new URL(\"https://data.police.uk/api/crimes-street/all-crime\");\r\n  url.searchParams.set(\"lat\", String(lat));\r\n  url.searchParams.set(\"lng\", String(lng));\r\n  if (dateYYYYMM) url.searchParams.set(\"date\", dateYYYYMM);\r\n\r\n  const res = await fetch(url.toString(), { headers: { Accept: \"application/json\" } });\r\n\r\n  // Police API quirk: 404 can mean \"no data for that area/month\"\r\n  if (res.status === 404) return [];\r\n\r\n  if (!res.ok) {\r\n    const body = await res.text().catch(() => \"\");\r\n    let msg = `Police API request failed (HTTP ${res.status} ${res.statusText}).`;\r\n    if (res.status === 400) msg += \" Your input may be malformed.\";\r\n    if (res.status === 429) msg += \" Rate limit hit — wait 10–30 seconds and try again.\";\r\n    if (res.status === 503) msg += \" Service busy — try a different month or location.\";\r\n    if (body) msg += ` Details: ${body.slice(0, 160)}`;\r\n    throw new Error(msg);\r\n  }\r\n\r\n  const json = await res.json().catch(() => []);\r\n  return Array.isArray(json) ? json : [];\r\n}\r\n\r\n\r\nexport function classifyQueryType(input) {\r\n  const q = String(input || \"\").trim();\r\n  if (!q) return { kind: \"empty\" };\r\n  if (isLikelyLatLngPair(q)) return { kind: \"latlng\" };\r\n  if (isLikelyUKPostcode(q)) return { kind: \"postcode\" };\r\n  return { kind: \"place\" };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}