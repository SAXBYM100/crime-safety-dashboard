{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mikes\\\\OneDrive\\\\Desktop\\\\JHub\\\\crime-safety-final\\\\crime-safety-final\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useRef, useState } from \"react\";\nimport \"./App.css\";\n\n/**\r\n * Accept location as:\r\n *  - UK postcode (e.g. GL50 1AA)\r\n *  - Place name (e.g. Plymouth)\r\n *  - Lat/Lng pair (e.g. 51.8994,-2.0783)\r\n *  - Lat/Lng pair in DMS-like tokens (e.g. \"51 53 58 N, 2 04 42 W\")\r\n *\r\n * Geocoding:\r\n *  - Postcodes.io for postcodes (no key required)\r\n *  - Nominatim (OpenStreetMap) for place name search (light use)\r\n *\r\n * Crime data:\r\n *  - UK Police Data API: street-level crimes for a point + optional YYYY-MM month\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction isLikelyLatLngPair(text) {\n  return /^\\s*.+\\s*,\\s*.+\\s*$/.test(text);\n}\nfunction isLikelyUKPostcode(text) {\n  return /\\b[A-Z]{1,2}\\d[A-Z\\d]?\\s*\\d[A-Z]{2}\\b/i.test((text || \"\").trim());\n}\n\n// Parse either decimal or tokenised DMS (e.g. \"51 53 58 N\" or \"-2.0783\" or \"2 04 42 W\")\nfunction parseCoordinateToken(token, kind) {\n  const raw = (token || \"\").trim();\n  if (!raw) throw new Error(\"Missing coordinate.\");\n\n  // Decimal first (allow comma as decimal separator when no dot)\n  const normalized = raw.includes(\",\") && !raw.includes(\".\") ? raw.replace(\",\", \".\") : raw;\n  const n = Number(normalized);\n  if (Number.isFinite(n)) {\n    validateRange(n, kind);\n    return n;\n  }\n\n  // Tokenised DMS: deg [min] [sec] [N/S/E/W]\n  const upper = raw.toUpperCase();\n  const hemiMatch = upper.match(/\\b([NSEW])\\b/) || upper.match(/([NSEW])\\s*$/);\n  const hemi = hemiMatch ? hemiMatch[1] : null;\n  const cleaned = upper.replace(/[NSEW]/g, \" \").replace(/[^\\d.\\- ]+/g, \" \").replace(/\\s+/g, \" \").trim();\n  const parts = cleaned.split(\" \").filter(Boolean);\n  if (parts.length < 1 || parts.length > 3) {\n    throw new Error(\"Use decimal (51.8994) or tokens (51 53 58 N).\");\n  }\n  const deg = Number(parts[0]);\n  const min = parts.length >= 2 ? Number(parts[1]) : 0;\n  const sec = parts.length === 3 ? Number(parts[2]) : 0;\n  if (![deg, min, sec].every(Number.isFinite)) throw new Error(\"Invalid coordinate numbers.\");\n  if (min < 0 || min >= 60 || sec < 0 || sec >= 60) throw new Error(\"Minutes/seconds must be 0–59.\");\n  let sign = deg < 0 ? -1 : 1;\n  if (hemi) sign = hemi === \"S\" || hemi === \"W\" ? -1 : 1;\n  const value = sign * (Math.abs(deg) + min / 60 + sec / 3600);\n  validateRange(value, kind);\n  return value;\n}\nfunction validateRange(value, kind) {\n  if (kind === \"lat\" && (value < -90 || value > 90)) throw new Error(\"Latitude must be between -90 and 90.\");\n  if (kind === \"lng\" && (value < -180 || value > 180)) throw new Error(\"Longitude must be between -180 and 180.\");\n}\nasync function fetchJsonOrThrow(url) {\n  const res = await fetch(url, {\n    headers: {\n      \"Accept\": \"application/json\"\n    }\n  });\n  if (!res.ok) {\n    const body = await res.text().catch(() => \"\");\n    let msg = `Request failed (HTTP ${res.status} ${res.statusText}).`;\n    if (res.status === 400) msg += \" Your input may be malformed.\";\n    if (res.status === 429) msg += \" Rate limit hit — wait 10–30 seconds and try again.\";\n    if (res.status === 503) msg += \" Service busy / too many results — try a different month or location.\";\n    if (body) msg += ` Details: ${body.slice(0, 160)}`;\n    throw new Error(msg);\n  }\n  return res.json();\n}\nasync function geocodeLocation(query, nominatimEmail) {\n  const q = (query || \"\").trim();\n  if (!q) throw new Error(\"Enter a location (postcode, place name, or lat,lng).\");\n\n  // 1) Lat/Lng pair: \"a,b\"\n  if (isLikelyLatLngPair(q)) {\n    const [a, b] = q.split(\",\").map(s => s.trim());\n    const lat = parseCoordinateToken(a, \"lat\");\n    const lng = parseCoordinateToken(b, \"lng\");\n    return {\n      lat,\n      lng,\n      source: \"manual\"\n    };\n  }\n\n  // 2) Postcode -> Postcodes.io\n  if (isLikelyUKPostcode(q)) {\n    const encoded = encodeURIComponent(q);\n    const url = `https://api.postcodes.io/postcodes/${encoded}`;\n    const json = await fetchJsonOrThrow(url);\n    if (!json || json.status !== 200 || !json.result) {\n      throw new Error(\"Postcode not found. Try a full UK postcode like GL50 1AA.\");\n    }\n    return {\n      lat: json.result.latitude,\n      lng: json.result.longitude,\n      source: \"postcode\"\n    };\n  }\n\n  // 3) Place name -> Nominatim\n  const encoded = encodeURIComponent(q);\n  const email = encodeURIComponent(nominatimEmail || \"student@example.com\");\n  const url = `https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encoded}&email=${email}`;\n  const results = await fetchJsonOrThrow(url);\n  if (!Array.isArray(results) || results.length === 0) {\n    throw new Error(\"No matching place found. Try adding a town/city, or use a postcode.\");\n  }\n  const first = results[0];\n  const lat = Number(first.lat);\n  const lng = Number(first.lon);\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) throw new Error(\"Geocoder returned an invalid coordinate.\");\n  return {\n    lat,\n    lng,\n    source: \"place\"\n  };\n}\nexport default function App() {\n  _s();\n  const [location, setLocation] = useState(\"\");\n  const [date, setDate] = useState(\"\"); // YYYY-MM optional\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [resolved, setResolved] = useState(null);\n\n  // simple throttle for geocoding calls (helps avoid rapid repeat clicks)\n  const lastGeoMs = useRef(0);\n  const canPreview = useMemo(() => Boolean((location || \"\").trim()), [location]);\n  async function fetchCrimes() {\n    setError(\"\");\n    setResolved(null);\n    setLoading(true);\n    setData([]);\n    const d = date.trim();\n    if (d && !/^\\d{4}-\\d{2}$/.test(d)) {\n      setLoading(false);\n      setError('Date must be YYYY-MM (e.g. \"2024-01\") or left blank.');\n      return;\n    }\n    try {\n      // throttle: 1 request per second max for geocoding\n      const now = Date.now();\n      const wait = Math.max(0, 1000 - (now - lastGeoMs.current));\n      if (wait > 0) await new Promise(r => setTimeout(r, wait));\n      lastGeoMs.current = Date.now();\n      const {\n        lat,\n        lng,\n        source\n      } = await geocodeLocation(location, nominatimEmail);\n      setResolved({\n        lat,\n        lng,\n        source\n      });\n      const url = new URL(\"https://data.police.uk/api/crimes-street/all-crime\");\n      url.searchParams.set(\"lat\", String(lat));\n      url.searchParams.set(\"lng\", String(lng));\n      if (d) url.searchParams.set(\"date\", d);\n      const crimes = await fetchJsonOrThrow(url.toString());\n      setData(Array.isArray(crimes) ? crimes : []);\n    } catch (e) {\n      setError(e.message || \"Something went wrong.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"hero\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"heroImg\",\n        src: process.env.PUBLIC_URL + \"/hero.svg\",\n        alt: \"Map pin illustration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Crime & Safety Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"sub\",\n          children: [\"Search by \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"postcode\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 23\n          }, this), \", \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"place name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 40\n          }, this), \", or \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"lat,lng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 62\n          }, this), \" to explore street-level crime data.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Location (GL50 1AA, Plymouth, or 51.8994,-2.0783)\",\n        value: location,\n        onChange: e => setLocation(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Month optional (YYYY-MM)\",\n        value: date,\n        onChange: e => setDate(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchCrimes,\n        disabled: loading,\n        children: loading ? \"Loading...\" : \"Fetch crimes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), canPreview && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"hint\",\n      children: [\"Tip: Postcodes like \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"GL50 1AA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 31\n      }, this), \" resolve fastest. Place names use OpenStreetMap geocoding.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, this), resolved && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"hint\",\n      children: [\"Resolved to: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: resolved.lat.toFixed(6)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 24\n      }, this), \", \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: resolved.lng.toFixed(6)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 58\n      }, this), \" (\", resolved.source, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Error:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 40\n      }, this), \" \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }, this), data.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tableWrap\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Street\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Outcome\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: data.slice(0, 100).map(crime => {\n            var _crime$location, _crime$location$stree, _crime$outcome_status;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: crime.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_crime$location = crime.location) === null || _crime$location === void 0 ? void 0 : (_crime$location$stree = _crime$location.street) === null || _crime$location$stree === void 0 ? void 0 : _crime$location$stree.name) || \"Unknown\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: crime.month || \"Unknown\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_crime$outcome_status = crime.outcome_status) === null || _crime$outcome_status === void 0 ? void 0 : _crime$outcome_status.category) || \"None recorded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this)]\n            }, crime.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }, this), !loading && !error && data.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"hint\",\n      children: [\"Try: \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"GL50 1AA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 16\n      }, this), \" (Cheltenham), \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"Cheltenham\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 52\n      }, this), \", or \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"51.8994,-2.0783\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 80\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"note footerLinks\",\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Sources:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://data.police.uk/docs/\",\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        children: \"UK Police API docs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), \" \", \"\\xB7 \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://data.police.uk/\",\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        children: \"data.police.uk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), \" \", \"\\xB7 \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/\",\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        children: \"Open Government Licence v3.0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Geocoding:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), \" Postcodes.io (postcode lookup) and OpenStreetMap Nominatim (place search). Do not enter sensitive personal addresses.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"gQ5Trlcxh5trKWpcabZWb8e0eZU=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useMemo","useRef","useState","jsxDEV","_jsxDEV","isLikelyLatLngPair","text","test","isLikelyUKPostcode","trim","parseCoordinateToken","token","kind","raw","Error","normalized","includes","replace","n","Number","isFinite","validateRange","upper","toUpperCase","hemiMatch","match","hemi","cleaned","parts","split","filter","Boolean","length","deg","min","sec","every","sign","value","Math","abs","fetchJsonOrThrow","url","res","fetch","headers","ok","body","catch","msg","status","statusText","slice","json","geocodeLocation","query","nominatimEmail","q","a","b","map","s","lat","lng","source","encoded","encodeURIComponent","result","latitude","longitude","email","results","Array","isArray","first","lon","App","_s","location","setLocation","date","setDate","data","setData","loading","setLoading","error","setError","resolved","setResolved","lastGeoMs","canPreview","fetchCrimes","d","now","Date","wait","max","current","Promise","r","setTimeout","URL","searchParams","set","String","crimes","toString","e","message","className","children","src","process","env","PUBLIC_URL","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","target","onClick","disabled","toFixed","crime","_crime$location","_crime$location$stree","_crime$outcome_status","category","street","name","month","outcome_status","id","href","rel","_c","$RefreshReg$"],"sources":["C:/Users/mikes/OneDrive/Desktop/JHub/crime-safety-final/crime-safety-final/src/App.js"],"sourcesContent":["import React, { useMemo, useRef, useState } from \"react\";\r\nimport \"./App.css\";\r\n\r\n/**\r\n * Accept location as:\r\n *  - UK postcode (e.g. GL50 1AA)\r\n *  - Place name (e.g. Plymouth)\r\n *  - Lat/Lng pair (e.g. 51.8994,-2.0783)\r\n *  - Lat/Lng pair in DMS-like tokens (e.g. \"51 53 58 N, 2 04 42 W\")\r\n *\r\n * Geocoding:\r\n *  - Postcodes.io for postcodes (no key required)\r\n *  - Nominatim (OpenStreetMap) for place name search (light use)\r\n *\r\n * Crime data:\r\n *  - UK Police Data API: street-level crimes for a point + optional YYYY-MM month\r\n */\r\n\r\nfunction isLikelyLatLngPair(text) {\r\n  return /^\\s*.+\\s*,\\s*.+\\s*$/.test(text);\r\n}\r\n\r\nfunction isLikelyUKPostcode(text) {\r\n  return /\\b[A-Z]{1,2}\\d[A-Z\\d]?\\s*\\d[A-Z]{2}\\b/i.test((text || \"\").trim());\r\n}\r\n\r\n// Parse either decimal or tokenised DMS (e.g. \"51 53 58 N\" or \"-2.0783\" or \"2 04 42 W\")\r\nfunction parseCoordinateToken(token, kind) {\r\n  const raw = (token || \"\").trim();\r\n  if (!raw) throw new Error(\"Missing coordinate.\");\r\n\r\n  // Decimal first (allow comma as decimal separator when no dot)\r\n  const normalized = raw.includes(\",\") && !raw.includes(\".\") ? raw.replace(\",\", \".\") : raw;\r\n  const n = Number(normalized);\r\n  if (Number.isFinite(n)) {\r\n    validateRange(n, kind);\r\n    return n;\r\n  }\r\n\r\n  // Tokenised DMS: deg [min] [sec] [N/S/E/W]\r\n  const upper = raw.toUpperCase();\r\n  const hemiMatch = upper.match(/\\b([NSEW])\\b/) || upper.match(/([NSEW])\\s*$/);\r\n  const hemi = hemiMatch ? hemiMatch[1] : null;\r\n\r\n  const cleaned = upper\r\n    .replace(/[NSEW]/g, \" \")\r\n    .replace(/[^\\d.\\- ]+/g, \" \")\r\n    .replace(/\\s+/g, \" \")\r\n    .trim();\r\n\r\n  const parts = cleaned.split(\" \").filter(Boolean);\r\n  if (parts.length < 1 || parts.length > 3) {\r\n    throw new Error(\"Use decimal (51.8994) or tokens (51 53 58 N).\");\r\n  }\r\n\r\n  const deg = Number(parts[0]);\r\n  const min = parts.length >= 2 ? Number(parts[1]) : 0;\r\n  const sec = parts.length === 3 ? Number(parts[2]) : 0;\r\n\r\n  if (![deg, min, sec].every(Number.isFinite)) throw new Error(\"Invalid coordinate numbers.\");\r\n  if (min < 0 || min >= 60 || sec < 0 || sec >= 60) throw new Error(\"Minutes/seconds must be 0–59.\");\r\n\r\n  let sign = deg < 0 ? -1 : 1;\r\n  if (hemi) sign = hemi === \"S\" || hemi === \"W\" ? -1 : 1;\r\n\r\n  const value = sign * (Math.abs(deg) + min / 60 + sec / 3600);\r\n  validateRange(value, kind);\r\n  return value;\r\n}\r\n\r\nfunction validateRange(value, kind) {\r\n  if (kind === \"lat\" && (value < -90 || value > 90)) throw new Error(\"Latitude must be between -90 and 90.\");\r\n  if (kind === \"lng\" && (value < -180 || value > 180)) throw new Error(\"Longitude must be between -180 and 180.\");\r\n}\r\n\r\nasync function fetchJsonOrThrow(url) {\r\n  const res = await fetch(url, {\r\n    headers: { \"Accept\": \"application/json\" }\r\n  });\r\n  if (!res.ok) {\r\n    const body = await res.text().catch(() => \"\");\r\n    let msg = `Request failed (HTTP ${res.status} ${res.statusText}).`;\r\n\r\n    if (res.status === 400) msg += \" Your input may be malformed.\";\r\n    if (res.status === 429) msg += \" Rate limit hit — wait 10–30 seconds and try again.\";\r\n    if (res.status === 503) msg += \" Service busy / too many results — try a different month or location.\";\r\n\r\n    if (body) msg += ` Details: ${body.slice(0, 160)}`;\r\n    throw new Error(msg);\r\n  }\r\n  return res.json();\r\n}\r\n\r\nasync function geocodeLocation(query, nominatimEmail) {\r\n  const q = (query || \"\").trim();\r\n  if (!q) throw new Error(\"Enter a location (postcode, place name, or lat,lng).\");\r\n\r\n  // 1) Lat/Lng pair: \"a,b\"\r\n  if (isLikelyLatLngPair(q)) {\r\n    const [a, b] = q.split(\",\").map((s) => s.trim());\r\n    const lat = parseCoordinateToken(a, \"lat\");\r\n    const lng = parseCoordinateToken(b, \"lng\");\r\n    return { lat, lng, source: \"manual\" };\r\n  }\r\n\r\n  // 2) Postcode -> Postcodes.io\r\n  if (isLikelyUKPostcode(q)) {\r\n    const encoded = encodeURIComponent(q);\r\n    const url = `https://api.postcodes.io/postcodes/${encoded}`;\r\n    const json = await fetchJsonOrThrow(url);\r\n    if (!json || json.status !== 200 || !json.result) {\r\n      throw new Error(\"Postcode not found. Try a full UK postcode like GL50 1AA.\");\r\n    }\r\n    return { lat: json.result.latitude, lng: json.result.longitude, source: \"postcode\" };\r\n  }\r\n\r\n  // 3) Place name -> Nominatim\r\n  const encoded = encodeURIComponent(q);\r\n  const email = encodeURIComponent(nominatimEmail || \"student@example.com\");\r\n  const url = `https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encoded}&email=${email}`;\r\n  const results = await fetchJsonOrThrow(url);\r\n\r\n  if (!Array.isArray(results) || results.length === 0) {\r\n    throw new Error(\"No matching place found. Try adding a town/city, or use a postcode.\");\r\n  }\r\n  const first = results[0];\r\n  const lat = Number(first.lat);\r\n  const lng = Number(first.lon);\r\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) throw new Error(\"Geocoder returned an invalid coordinate.\");\r\n  return { lat, lng, source: \"place\" };\r\n}\r\n\r\nexport default function App() {\r\n  const [location, setLocation] = useState(\"\");\r\n  const [date, setDate] = useState(\"\"); // YYYY-MM optional\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [resolved, setResolved] = useState(null);\r\n\r\n  // simple throttle for geocoding calls (helps avoid rapid repeat clicks)\r\n  const lastGeoMs = useRef(0);\r\n\r\n  const canPreview = useMemo(() => Boolean((location || \"\").trim()), [location]);\r\n\r\n  async function fetchCrimes() {\r\n    setError(\"\");\r\n    setResolved(null);\r\n    setLoading(true);\r\n    setData([]);\r\n\r\n    const d = date.trim();\r\n    if (d && !/^\\d{4}-\\d{2}$/.test(d)) {\r\n      setLoading(false);\r\n      setError('Date must be YYYY-MM (e.g. \"2024-01\") or left blank.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // throttle: 1 request per second max for geocoding\r\n      const now = Date.now();\r\n      const wait = Math.max(0, 1000 - (now - lastGeoMs.current));\r\n      if (wait > 0) await new Promise((r) => setTimeout(r, wait));\r\n      lastGeoMs.current = Date.now();\r\n\r\n      const { lat, lng, source } = await geocodeLocation(location, nominatimEmail);\r\n      setResolved({ lat, lng, source });\r\n\r\n      const url = new URL(\"https://data.police.uk/api/crimes-street/all-crime\");\r\n      url.searchParams.set(\"lat\", String(lat));\r\n      url.searchParams.set(\"lng\", String(lng));\r\n      if (d) url.searchParams.set(\"date\", d);\r\n\r\n      const crimes = await fetchJsonOrThrow(url.toString());\r\n      setData(Array.isArray(crimes) ? crimes : []);\r\n    } catch (e) {\r\n      setError(e.message || \"Something went wrong.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"hero\">\r\n        <img className=\"heroImg\" src={process.env.PUBLIC_URL + \"/hero.svg\"} alt=\"Map pin illustration\" />\r\n        <div>\r\n          <h1>Crime &amp; Safety Dashboard</h1>\r\n          <p className=\"sub\">\r\n            Search by <b>postcode</b>, <b>place name</b>, or <b>lat,lng</b> to explore street-level crime data.\r\n          </p>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"form\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Location (GL50 1AA, Plymouth, or 51.8994,-2.0783)\"\r\n          value={location}\r\n          onChange={(e) => setLocation(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Month optional (YYYY-MM)\"\r\n          value={date}\r\n          onChange={(e) => setDate(e.target.value)}\r\n        />\r\n        <button onClick={fetchCrimes} disabled={loading}>\r\n          {loading ? \"Loading...\" : \"Fetch crimes\"}\r\n        </button>\r\n      </div>\r\n\r\n      {canPreview && (\r\n        <p className=\"hint\">\r\n          Tip: Postcodes like <code>GL50 1AA</code> resolve fastest. Place names use OpenStreetMap geocoding.\r\n        </p>\r\n      )}\r\n\r\n      {resolved && (\r\n        <p className=\"hint\">\r\n          Resolved to: <b>{resolved.lat.toFixed(6)}</b>, <b>{resolved.lng.toFixed(6)}</b> ({resolved.source})\r\n        </p>\r\n      )}\r\n\r\n      {error && <div className=\"error\"><b>Error:</b> {error}</div>}\r\n\r\n      {data.length > 0 && (\r\n        <div className=\"tableWrap\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Category</th>\r\n                <th>Street</th>\r\n                <th>Month</th>\r\n                <th>Outcome</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {data.slice(0, 100).map((crime) => (\r\n                <tr key={crime.id}>\r\n                  <td>{crime.category}</td>\r\n                  <td>{crime.location?.street?.name || \"Unknown\"}</td>\r\n                  <td>{crime.month || \"Unknown\"}</td>\r\n                  <td>{crime.outcome_status?.category || \"None recorded\"}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && !error && data.length === 0 && (\r\n        <p className=\"hint\">\r\n          Try: <code>GL50 1AA</code> (Cheltenham), <code>Cheltenham</code>, or <code>51.8994,-2.0783</code>.\r\n        </p>\r\n      )}\r\n\r\n      <p className=\"note footerLinks\">\r\n        <b>Sources:</b>{\" \"}\r\n        <a href=\"https://data.police.uk/docs/\" target=\"_blank\" rel=\"noreferrer\">UK Police API docs</a>{\" \"}\r\n        · <a href=\"https://data.police.uk/\" target=\"_blank\" rel=\"noreferrer\">data.police.uk</a>{\" \"}\r\n        · <a href=\"https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/\" target=\"_blank\" rel=\"noreferrer\">Open Government Licence v3.0</a>\r\n        <br />\r\n        <b>Geocoding:</b> Postcodes.io (postcode lookup) and OpenStreetMap Nominatim (place search). Do not enter sensitive personal addresses.\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}