{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mikes\\\\OneDrive\\\\Desktop\\\\JHub\\\\crime-safety-final\\\\crime-safety-final\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useRef, useState } from \"react\";\nimport \"./App.css\";\n\n/**\n * Accept location as:\n *  - UK postcode (e.g. GL50 1AA)\n *  - Place name (e.g. Cheltenham)\n *  - Lat/Lng pair (e.g. 51.8994,-2.0783)\n *  - Lat/Lng pair in DMS-like tokens (e.g. \"51 53 58 N, 2 04 42 W\")\n *\n * Geocoding:\n *  - Postcodes.io for postcodes (no key required)\n *  - Nominatim (OpenStreetMap) for place name search (light use)\n *\n * Crime data:\n *  - UK Police Data API: street-level crimes for a point + optional YYYY-MM month\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction isLikelyLatLngPair(text) {\n  return /^\\s*.+\\s*,\\s*.+\\s*$/.test(text);\n}\nfunction isLikelyUKPostcode(text) {\n  return /\\b[A-Z]{1,2}\\d[A-Z\\d]?\\s*\\d[A-Z]{2}\\b/i.test((text || \"\").trim());\n}\n\n// Parse either decimal or tokenised DMS (e.g. \"51 53 58 N\" or \"-2.0783\" or \"2 04 42 W\")\nfunction parseCoordinateToken(token, kind) {\n  const raw = (token || \"\").trim();\n  if (!raw) throw new Error(\"Missing coordinate.\");\n\n  // Decimal first (allow comma as decimal separator when no dot)\n  const normalized = raw.includes(\",\") && !raw.includes(\".\") ? raw.replace(\",\", \".\") : raw;\n  const n = Number(normalized);\n  if (Number.isFinite(n)) {\n    validateRange(n, kind);\n    return n;\n  }\n\n  // Tokenised DMS: deg [min] [sec] [N/S/E/W]\n  const upper = raw.toUpperCase();\n  const hemiMatch = upper.match(/\\b([NSEW])\\b/) || upper.match(/([NSEW])\\s*$/);\n  const hemi = hemiMatch ? hemiMatch[1] : null;\n  const cleaned = upper.replace(/[NSEW]/g, \" \").replace(/[^\\d.\\- ]+/g, \" \").replace(/\\s+/g, \" \").trim();\n  const parts = cleaned.split(\" \").filter(Boolean);\n  if (parts.length < 1 || parts.length > 3) {\n    throw new Error(\"Use decimal (51.8994) or tokens (51 53 58 N).\");\n  }\n  const deg = Number(parts[0]);\n  const min = parts.length >= 2 ? Number(parts[1]) : 0;\n  const sec = parts.length === 3 ? Number(parts[2]) : 0;\n  if (![deg, min, sec].every(Number.isFinite)) throw new Error(\"Invalid coordinate numbers.\");\n  if (min < 0 || min >= 60 || sec < 0 || sec >= 60) throw new Error(\"Minutes/seconds must be 0–59.\");\n  let sign = deg < 0 ? -1 : 1;\n  if (hemi) sign = hemi === \"S\" || hemi === \"W\" ? -1 : 1;\n  const value = sign * (Math.abs(deg) + min / 60 + sec / 3600);\n  validateRange(value, kind);\n  return value;\n}\nfunction validateRange(value, kind) {\n  if (kind === \"lat\" && (value < -90 || value > 90)) throw new Error(\"Latitude must be between -90 and 90.\");\n  if (kind === \"lng\" && (value < -180 || value > 180)) throw new Error(\"Longitude must be between -180 and 180.\");\n}\nasync function fetchJsonOrThrow(url) {\n  const res = await fetch(url, {\n    headers: {\n      \"Accept\": \"application/json\"\n    }\n  });\n  if (!res.ok) {\n    const body = await res.text().catch(() => \"\");\n    let msg = `Request failed (HTTP ${res.status} ${res.statusText}).`;\n    if (res.status === 400) msg += \" Your input may be malformed.\";\n    if (res.status === 429) msg += \" Rate limit hit — wait 10–30 seconds and try again.\";\n    if (res.status === 503) msg += \" Service busy / too many results — try a different month or location.\";\n    if (body) msg += ` Details: ${body.slice(0, 160)}`;\n    throw new Error(msg);\n  }\n  return res.json();\n}\nasync function geocodeLocation(query, nominatimEmail) {\n  const q = (query || \"\").trim();\n  if (!q) throw new Error(\"Enter a location (postcode, place name, or lat,lng).\");\n\n  // 1) Lat/Lng pair: \"a,b\"\n  if (isLikelyLatLngPair(q)) {\n    const [a, b] = q.split(\",\").map(s => s.trim());\n    const lat = parseCoordinateToken(a, \"lat\");\n    const lng = parseCoordinateToken(b, \"lng\");\n    return {\n      lat,\n      lng,\n      source: \"manual\"\n    };\n  }\n\n  // 2) Postcode -> Postcodes.io\n  if (isLikelyUKPostcode(q)) {\n    const encoded = encodeURIComponent(q);\n    const url = `https://api.postcodes.io/postcodes/${encoded}`;\n    const json = await fetchJsonOrThrow(url);\n    if (!json || json.status !== 200 || !json.result) {\n      throw new Error(\"Postcode not found. Try a full UK postcode like GL50 1AA.\");\n    }\n    return {\n      lat: json.result.latitude,\n      lng: json.result.longitude,\n      source: \"postcode\"\n    };\n  }\n\n  // 3) Place name -> Nominatim\n  const encoded = encodeURIComponent(q);\n  const email = encodeURIComponent(nominatimEmail || \"student@example.com\");\n  const url = `https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encoded}&email=${email}`;\n  const results = await fetchJsonOrThrow(url);\n  if (!Array.isArray(results) || results.length === 0) {\n    throw new Error(\"No matching place found. Try adding a town/city, or use a postcode.\");\n  }\n  const first = results[0];\n  const lat = Number(first.lat);\n  const lng = Number(first.lon);\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) throw new Error(\"Geocoder returned an invalid coordinate.\");\n  return {\n    lat,\n    lng,\n    source: \"place\"\n  };\n}\nexport default function App() {\n  _s();\n  const [location, setLocation] = useState(\"\");\n  const [date, setDate] = useState(\"\"); // YYYY-MM optional\n  const [nominatimEmail, setNominatimEmail] = useState(\"\"); // optional\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [resolved, setResolved] = useState(null);\n\n  // simple throttle for geocoding calls (helps avoid rapid repeat clicks)\n  const lastGeoMs = useRef(0);\n  const canPreview = useMemo(() => Boolean((location || \"\").trim()), [location]);\n  async function fetchCrimes() {\n    setError(\"\");\n    setResolved(null);\n    setLoading(true);\n    setData([]);\n    const d = date.trim();\n    if (d && !/^\\d{4}-\\d{2}$/.test(d)) {\n      setLoading(false);\n      setError('Date must be YYYY-MM (e.g. \"2024-01\") or left blank.');\n      return;\n    }\n    try {\n      // throttle: 1 request per second max for geocoding\n      const now = Date.now();\n      const wait = Math.max(0, 1000 - (now - lastGeoMs.current));\n      if (wait > 0) await new Promise(r => setTimeout(r, wait));\n      lastGeoMs.current = Date.now();\n      const {\n        lat,\n        lng,\n        source\n      } = await geocodeLocation(location, nominatimEmail);\n      setResolved({\n        lat,\n        lng,\n        source\n      });\n      const url = new URL(\"https://data.police.uk/api/crimes-street/all-crime\");\n      url.searchParams.set(\"lat\", String(lat));\n      url.searchParams.set(\"lng\", String(lng));\n      if (d) url.searchParams.set(\"date\", d);\n      const crimes = await fetchJsonOrThrow(url.toString());\n      setData(Array.isArray(crimes) ? crimes : []);\n    } catch (e) {\n      setError(e.message || \"Something went wrong.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"hero\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"heroImg\",\n        src: process.env.PUBLIC_URL + \"/hero.svg\",\n        alt: \"Map pin illustration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Crime & Safety Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"sub\",\n          children: [\"Search by \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"postcode\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 23\n          }, this), \", \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"place name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 40\n          }, this), \", or \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"lat,lng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 62\n          }, this), \" to explore street-level crime data.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Location (GL50 1AA, Cheltenham, or 51.8994,-2.0783)\",\n        value: location,\n        onChange: e => setLocation(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Month optional (YYYY-MM)\",\n        value: date,\n        onChange: e => setDate(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchCrimes,\n        disabled: loading,\n        children: loading ? \"Loading...\" : \"Fetch crimes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      style: {\n        marginTop: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Optional: your email for Nominatim identification (recommended)\",\n        value: nominatimEmail,\n        onChange: e => setNominatimEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), canPreview && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"hint\",\n      children: [\"Tip: Postcodes like \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"GL50 1AA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 31\n      }, this), \" resolve fastest. Place names use OpenStreetMap geocoding.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }, this), resolved && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"hint\",\n      children: [\"Resolved to: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: resolved.lat.toFixed(6)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 24\n      }, this), \", \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: resolved.lng.toFixed(6)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 58\n      }, this), \" (\", resolved.source, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Error:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 40\n      }, this), \" \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }, this), data.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tableWrap\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Street\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Outcome\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: data.slice(0, 100).map(crime => {\n            var _crime$location, _crime$location$stree, _crime$outcome_status;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: crime.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_crime$location = crime.location) === null || _crime$location === void 0 ? void 0 : (_crime$location$stree = _crime$location.street) === null || _crime$location$stree === void 0 ? void 0 : _crime$location$stree.name) || \"Unknown\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: crime.month || \"Unknown\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_crime$outcome_status = crime.outcome_status) === null || _crime$outcome_status === void 0 ? void 0 : _crime$outcome_status.category) || \"None recorded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 19\n              }, this)]\n            }, crime.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }, this), !loading && !error && data.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"hint\",\n      children: [\"Try: \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"GL50 1AA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 16\n      }, this), \" (Cheltenham), \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"Cheltenham\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 52\n      }, this), \", or \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"51.8994,-2.0783\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 80\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"note footerLinks\",\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Sources:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://data.police.uk/docs/\",\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        children: \"UK Police API docs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), \" \", \"\\xB7 \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://data.police.uk/\",\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        children: \"data.police.uk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this), \" \", \"\\xB7 \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/\",\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        children: \"Open Government Licence v3.0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Geocoding:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), \" Postcodes.io (postcode lookup) and OpenStreetMap Nominatim (place search). Do not enter sensitive personal addresses.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"0cGdlWEn6kkFlAzq17yAqtJE2P0=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useMemo","useRef","useState","jsxDEV","_jsxDEV","isLikelyLatLngPair","text","test","isLikelyUKPostcode","trim","parseCoordinateToken","token","kind","raw","Error","normalized","includes","replace","n","Number","isFinite","validateRange","upper","toUpperCase","hemiMatch","match","hemi","cleaned","parts","split","filter","Boolean","length","deg","min","sec","every","sign","value","Math","abs","fetchJsonOrThrow","url","res","fetch","headers","ok","body","catch","msg","status","statusText","slice","json","geocodeLocation","query","nominatimEmail","q","a","b","map","s","lat","lng","source","encoded","encodeURIComponent","result","latitude","longitude","email","results","Array","isArray","first","lon","App","_s","location","setLocation","date","setDate","setNominatimEmail","data","setData","loading","setLoading","error","setError","resolved","setResolved","lastGeoMs","canPreview","fetchCrimes","d","now","Date","wait","max","current","Promise","r","setTimeout","URL","searchParams","set","String","crimes","toString","e","message","className","children","src","process","env","PUBLIC_URL","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","target","onClick","disabled","style","marginTop","toFixed","crime","_crime$location","_crime$location$stree","_crime$outcome_status","category","street","name","month","outcome_status","id","href","rel","_c","$RefreshReg$"],"sources":["C:/Users/mikes/OneDrive/Desktop/JHub/crime-safety-final/crime-safety-final/src/App.js"],"sourcesContent":["import React, { useMemo, useRef, useState } from \"react\";\nimport \"./App.css\";\n\n/**\n * Accept location as:\n *  - UK postcode (e.g. GL50 1AA)\n *  - Place name (e.g. Cheltenham)\n *  - Lat/Lng pair (e.g. 51.8994,-2.0783)\n *  - Lat/Lng pair in DMS-like tokens (e.g. \"51 53 58 N, 2 04 42 W\")\n *\n * Geocoding:\n *  - Postcodes.io for postcodes (no key required)\n *  - Nominatim (OpenStreetMap) for place name search (light use)\n *\n * Crime data:\n *  - UK Police Data API: street-level crimes for a point + optional YYYY-MM month\n */\n\nfunction isLikelyLatLngPair(text) {\n  return /^\\s*.+\\s*,\\s*.+\\s*$/.test(text);\n}\n\nfunction isLikelyUKPostcode(text) {\n  return /\\b[A-Z]{1,2}\\d[A-Z\\d]?\\s*\\d[A-Z]{2}\\b/i.test((text || \"\").trim());\n}\n\n// Parse either decimal or tokenised DMS (e.g. \"51 53 58 N\" or \"-2.0783\" or \"2 04 42 W\")\nfunction parseCoordinateToken(token, kind) {\n  const raw = (token || \"\").trim();\n  if (!raw) throw new Error(\"Missing coordinate.\");\n\n  // Decimal first (allow comma as decimal separator when no dot)\n  const normalized = raw.includes(\",\") && !raw.includes(\".\") ? raw.replace(\",\", \".\") : raw;\n  const n = Number(normalized);\n  if (Number.isFinite(n)) {\n    validateRange(n, kind);\n    return n;\n  }\n\n  // Tokenised DMS: deg [min] [sec] [N/S/E/W]\n  const upper = raw.toUpperCase();\n  const hemiMatch = upper.match(/\\b([NSEW])\\b/) || upper.match(/([NSEW])\\s*$/);\n  const hemi = hemiMatch ? hemiMatch[1] : null;\n\n  const cleaned = upper\n    .replace(/[NSEW]/g, \" \")\n    .replace(/[^\\d.\\- ]+/g, \" \")\n    .replace(/\\s+/g, \" \")\n    .trim();\n\n  const parts = cleaned.split(\" \").filter(Boolean);\n  if (parts.length < 1 || parts.length > 3) {\n    throw new Error(\"Use decimal (51.8994) or tokens (51 53 58 N).\");\n  }\n\n  const deg = Number(parts[0]);\n  const min = parts.length >= 2 ? Number(parts[1]) : 0;\n  const sec = parts.length === 3 ? Number(parts[2]) : 0;\n\n  if (![deg, min, sec].every(Number.isFinite)) throw new Error(\"Invalid coordinate numbers.\");\n  if (min < 0 || min >= 60 || sec < 0 || sec >= 60) throw new Error(\"Minutes/seconds must be 0–59.\");\n\n  let sign = deg < 0 ? -1 : 1;\n  if (hemi) sign = hemi === \"S\" || hemi === \"W\" ? -1 : 1;\n\n  const value = sign * (Math.abs(deg) + min / 60 + sec / 3600);\n  validateRange(value, kind);\n  return value;\n}\n\nfunction validateRange(value, kind) {\n  if (kind === \"lat\" && (value < -90 || value > 90)) throw new Error(\"Latitude must be between -90 and 90.\");\n  if (kind === \"lng\" && (value < -180 || value > 180)) throw new Error(\"Longitude must be between -180 and 180.\");\n}\n\nasync function fetchJsonOrThrow(url) {\n  const res = await fetch(url, {\n    headers: { \"Accept\": \"application/json\" }\n  });\n  if (!res.ok) {\n    const body = await res.text().catch(() => \"\");\n    let msg = `Request failed (HTTP ${res.status} ${res.statusText}).`;\n\n    if (res.status === 400) msg += \" Your input may be malformed.\";\n    if (res.status === 429) msg += \" Rate limit hit — wait 10–30 seconds and try again.\";\n    if (res.status === 503) msg += \" Service busy / too many results — try a different month or location.\";\n\n    if (body) msg += ` Details: ${body.slice(0, 160)}`;\n    throw new Error(msg);\n  }\n  return res.json();\n}\n\nasync function geocodeLocation(query, nominatimEmail) {\n  const q = (query || \"\").trim();\n  if (!q) throw new Error(\"Enter a location (postcode, place name, or lat,lng).\");\n\n  // 1) Lat/Lng pair: \"a,b\"\n  if (isLikelyLatLngPair(q)) {\n    const [a, b] = q.split(\",\").map((s) => s.trim());\n    const lat = parseCoordinateToken(a, \"lat\");\n    const lng = parseCoordinateToken(b, \"lng\");\n    return { lat, lng, source: \"manual\" };\n  }\n\n  // 2) Postcode -> Postcodes.io\n  if (isLikelyUKPostcode(q)) {\n    const encoded = encodeURIComponent(q);\n    const url = `https://api.postcodes.io/postcodes/${encoded}`;\n    const json = await fetchJsonOrThrow(url);\n    if (!json || json.status !== 200 || !json.result) {\n      throw new Error(\"Postcode not found. Try a full UK postcode like GL50 1AA.\");\n    }\n    return { lat: json.result.latitude, lng: json.result.longitude, source: \"postcode\" };\n  }\n\n  // 3) Place name -> Nominatim\n  const encoded = encodeURIComponent(q);\n  const email = encodeURIComponent(nominatimEmail || \"student@example.com\");\n  const url = `https://nominatim.openstreetmap.org/search?format=jsonv2&limit=1&q=${encoded}&email=${email}`;\n  const results = await fetchJsonOrThrow(url);\n\n  if (!Array.isArray(results) || results.length === 0) {\n    throw new Error(\"No matching place found. Try adding a town/city, or use a postcode.\");\n  }\n  const first = results[0];\n  const lat = Number(first.lat);\n  const lng = Number(first.lon);\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) throw new Error(\"Geocoder returned an invalid coordinate.\");\n  return { lat, lng, source: \"place\" };\n}\n\nexport default function App() {\n  const [location, setLocation] = useState(\"\");\n  const [date, setDate] = useState(\"\"); // YYYY-MM optional\n  const [nominatimEmail, setNominatimEmail] = useState(\"\"); // optional\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [resolved, setResolved] = useState(null);\n\n  // simple throttle for geocoding calls (helps avoid rapid repeat clicks)\n  const lastGeoMs = useRef(0);\n\n  const canPreview = useMemo(() => Boolean((location || \"\").trim()), [location]);\n\n  async function fetchCrimes() {\n    setError(\"\");\n    setResolved(null);\n    setLoading(true);\n    setData([]);\n\n    const d = date.trim();\n    if (d && !/^\\d{4}-\\d{2}$/.test(d)) {\n      setLoading(false);\n      setError('Date must be YYYY-MM (e.g. \"2024-01\") or left blank.');\n      return;\n    }\n\n    try {\n      // throttle: 1 request per second max for geocoding\n      const now = Date.now();\n      const wait = Math.max(0, 1000 - (now - lastGeoMs.current));\n      if (wait > 0) await new Promise((r) => setTimeout(r, wait));\n      lastGeoMs.current = Date.now();\n\n      const { lat, lng, source } = await geocodeLocation(location, nominatimEmail);\n      setResolved({ lat, lng, source });\n\n      const url = new URL(\"https://data.police.uk/api/crimes-street/all-crime\");\n      url.searchParams.set(\"lat\", String(lat));\n      url.searchParams.set(\"lng\", String(lng));\n      if (d) url.searchParams.set(\"date\", d);\n\n      const crimes = await fetchJsonOrThrow(url.toString());\n      setData(Array.isArray(crimes) ? crimes : []);\n    } catch (e) {\n      setError(e.message || \"Something went wrong.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"hero\">\n        <img className=\"heroImg\" src={process.env.PUBLIC_URL + \"/hero.svg\"} alt=\"Map pin illustration\" />\n        <div>\n          <h1>Crime &amp; Safety Dashboard</h1>\n          <p className=\"sub\">\n            Search by <b>postcode</b>, <b>place name</b>, or <b>lat,lng</b> to explore street-level crime data.\n          </p>\n        </div>\n      </header>\n\n      <div className=\"form\">\n        <input\n          type=\"text\"\n          placeholder=\"Location (GL50 1AA, Cheltenham, or 51.8994,-2.0783)\"\n          value={location}\n          onChange={(e) => setLocation(e.target.value)}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Month optional (YYYY-MM)\"\n          value={date}\n          onChange={(e) => setDate(e.target.value)}\n        />\n        <button onClick={fetchCrimes} disabled={loading}>\n          {loading ? \"Loading...\" : \"Fetch crimes\"}\n        </button>\n      </div>\n\n      <div className=\"form\" style={{ marginTop: 0 }}>\n        <input\n          type=\"text\"\n          placeholder=\"Optional: your email for Nominatim identification (recommended)\"\n          value={nominatimEmail}\n          onChange={(e) => setNominatimEmail(e.target.value)}\n        />\n      </div>\n\n      {canPreview && (\n        <p className=\"hint\">\n          Tip: Postcodes like <code>GL50 1AA</code> resolve fastest. Place names use OpenStreetMap geocoding.\n        </p>\n      )}\n\n      {resolved && (\n        <p className=\"hint\">\n          Resolved to: <b>{resolved.lat.toFixed(6)}</b>, <b>{resolved.lng.toFixed(6)}</b> ({resolved.source})\n        </p>\n      )}\n\n      {error && <div className=\"error\"><b>Error:</b> {error}</div>}\n\n      {data.length > 0 && (\n        <div className=\"tableWrap\">\n          <table>\n            <thead>\n              <tr>\n                <th>Category</th>\n                <th>Street</th>\n                <th>Month</th>\n                <th>Outcome</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.slice(0, 100).map((crime) => (\n                <tr key={crime.id}>\n                  <td>{crime.category}</td>\n                  <td>{crime.location?.street?.name || \"Unknown\"}</td>\n                  <td>{crime.month || \"Unknown\"}</td>\n                  <td>{crime.outcome_status?.category || \"None recorded\"}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {!loading && !error && data.length === 0 && (\n        <p className=\"hint\">\n          Try: <code>GL50 1AA</code> (Cheltenham), <code>Cheltenham</code>, or <code>51.8994,-2.0783</code>.\n        </p>\n      )}\n\n      <p className=\"note footerLinks\">\n        <b>Sources:</b>{\" \"}\n        <a href=\"https://data.police.uk/docs/\" target=\"_blank\" rel=\"noreferrer\">UK Police API docs</a>{\" \"}\n        · <a href=\"https://data.police.uk/\" target=\"_blank\" rel=\"noreferrer\">data.police.uk</a>{\" \"}\n        · <a href=\"https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/\" target=\"_blank\" rel=\"noreferrer\">Open Government Licence v3.0</a>\n        <br />\n        <b>Geocoding:</b> Postcodes.io (postcode lookup) and OpenStreetMap Nominatim (place search). Do not enter sensitive personal addresses.\n      </p>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}